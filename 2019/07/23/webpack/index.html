<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  自动化构建工具 |   余鹏的博客-前端-seo优化与实战经验分享博客 </title>

  <meta name="Keywords" content="余鹏,博客,前端,实战经验分享">

  <meta name="Description" content="Hello! I'm Yu Peng.建立这个博客来记录自己的前端技术学习成果、以及网站的SEO优化的认识、对技术的积累和知识的巩固、追求且学习新的知识，与大家分享交流。">

  
    <link rel="icon" href="/images/favicon.png">
  


  <link rel="stylesheet" href="/nayo.min.css"> 
</head>  
  <body>   
    
      <header class="header-wrapper">

  <nav class="inner">
    <div class="title">
      <a href="/">
        <img class="logo" src="/images/logo.png">
      </a>
    </div>

    <ul class="menu">
      
      
      <li class="item">
        <a class="link" id="menu-home" href="/">
          <i class="iconfont icon-home">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-archives" href="/archives">
          <i class="iconfont icon-archives">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-tags" href="/tags">
          <i class="iconfont icon-tags">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-about" href="/about">
          <i class="iconfont icon-about">
        </i></a>
      </li>
      
      
      
      <li class="item">
        <a class="link" id="menu-search">
          <i class="iconfont icon-search">
        </i></a>
        

        
      
    </li></ul>
  </nav>
</header>

<header class="mobile-header-wrapper">
  <i id="mobile-toggle" class="iconfont icon-menu mobile-toggle"></i>
</header>   

      <div class="container">       
          
          
            <div class="container-inner">  
          

          <article class="post slideDownMin">
  
	
<div class="header">
		<p class="title">	
			自动化构建工具
		</p>
		<div class="info">	
			<time>
				7月 23, 2019
			</time>

			
			
				<i class="iconfont icon-words"></i>
				<span class="words">3978
				</span>
			
		</div>
</div> 
	

    <script type="text/x-mathjax-config">
        var post = document.getElementsByClassName("post")[0];  
        MathJax.Hub.Config({
            showProcessingMessages: false,
            messageStyle: "none",    
            tex2jax: {
                inlineMath:  [ ["$", "$"] , ["\\(","\\)"]],
                displayMath: [ ["$$","$$"] , ["\\[","\\]"]],
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'],
            },
            "HTML-CSS": {            
                showMathMenu: false
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub,post]);
    </script>
    <style>.MathJax{outline:0;}</style>

    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.2/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 

	  <div class="typo post-content ">

		

			
					<p>使用构建工具去对 JS、CSS、HTML、LESS、IMG 等进行合并压缩构建到实现自动化构建项目。</p>
<a id="more"></a>



<h3 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h3><p>本质上，<em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <em>bundle</em>。</p>
<ul>
<li><strong>了解Webpack相关</strong></li>
</ul>
<ul>
<li><p>什么是webpack</p>
<ul>
<li><p>Webpack是一个模块打包器(bundler)。</p>
</li>
<li><p>在Webpack看来, 前端的所有资源文件(js/css/img/less/…)都会作为模块处理</p>
</li>
<li><p>它将根据模块的依赖关系进行静态分析，生成对应的静态资源</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>理解Loader</p>
<ul>
<li><p>Webpack 本身只能加载JS模块，如果要加载其他类型的文件(模块)，就需要使用对应的loader 进行转换/加载</p>
</li>
<li><p>Loader 本身也是运行在 node.js 环境中的 JavaScript 模块</p>
</li>
<li><p>它本身是一个函数，接受源文件作为参数，返回转换的结果</p>
</li>
<li><p>loader 一般以 xxx-loader 的方式命名，xxx 代表了这个 loader 要做的转换功能，比如 json-loader。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>配置文件(默认)</p>
<ul>
<li>webpack.config.js : 是一个node模块，返回一个 json 格式的配置信息对象</li>
</ul>
</li>
</ul>
<ul>
<li><p>插件</p>
<ul>
<li><p>插件件可以完成一些loader不能完成的功能。</p>
</li>
<li><p>插件的使用一般是在 webpack 的配置信息 plugins 选项中指定。</p>
</li>
<li><p>Webpack 本身内置了一些常用的插件，还可以通过 npm 安装第三方插件</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>学习文档 : </p>
<ul>
<li><p>webpack官方入门: <a href="http://webpack.github.io/docs/tutorials/getting-started/" target="_blank" rel="noopener">http://webpack.github.io/docs/tutorials/getting-started/</a></p>
</li>
<li><p>Webpack中文指南: <a href="http://zhaoda.net/webpack-handbook/index.html" target="_blank" rel="noopener">http://zhaoda.net/webpack-handbook/index.html</a></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>你将学到:</p>
<ul>
<li><p>How to install webpack</p>
</li>
<li><p>How to use webpack</p>
</li>
<li><p>How to use loaders</p>
</li>
<li><p>How to use the development server</p>
</li>
<li><p>How to use image</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>初始化项目: package.json<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"webpack_test"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>安装webpack</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">npm install <span class="symbol">webpack@</span><span class="number">1</span> -g  <span class="comment">//全局安装</span></span><br><span class="line">npm install <span class="symbol">webpack@</span><span class="number">1</span> --save-dev  <span class="comment">//局部安装</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>开始编译</p>
<ul>
<li><p>创建入口src/js/ : entry.js</p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">document.write(<span class="string">"entry.js is work"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建主页面 build/: index.html</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/build.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译js</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">webpack src<span class="regexp">/js/</span>entry.js build<span class="regexp">/js/</span>build.js</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看页面效果</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>第二个js</p>
<ul>
<li><p>创建第二个js: src/js/content.js</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">module.exports</span> = <span class="string">" &lt;br&gt; It works from content.js"</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>更新入口js : entry.js</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">* <span class="built_in">document</span>.write(<span class="string">"entry.js is works."</span>);</span><br><span class="line">* <span class="built_in">document</span>.write(<span class="built_in">require</span>(<span class="string">"./content.js"</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译js:</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">webpack src<span class="regexp">/js/</span>entry.js build<span class="regexp">/js/</span>build.js</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看页面效果</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>第一个加载器(loader)</p>
<ul>
<li><p>安装样式的loader</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> css-loader <span class="keyword">style</span>-loader <span class="comment">--save-dev</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建样式文件: src/css/test.css</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新入口js : entry.js</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">+ <span class="built_in">require</span>(<span class="string">"style-loader!css-loader!../css/test.css"</span>);</span><br><span class="line">* <span class="built_in">document</span>.write(<span class="string">"entry.js is works."</span>);</span><br><span class="line">* <span class="built_in">document</span>.write(<span class="built_in">require</span>(<span class="string">"./content.js"</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译js, 并查看页面效果</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">webpack src<span class="regexp">/js/</span>entry.js build<span class="regexp">/js/</span>bundle.js</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p>绑定加载器</p>
<ul>
<li><p>更新入口js : entry.js</p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line">- <span class="meta">require</span>(<span class="string">"style-loader!css-loader!./test.css"</span>)<span class="comment">;</span></span><br><span class="line">+ <span class="meta">require</span>(<span class="string">"./test.css"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编译:</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">webpack src/js/entry<span class="selector-class">.js</span> build/js/bundle<span class="selector-class">.js</span> --module-bind css=style-loader!css-loader</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看页面效果</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>使用webpack配置文件</p>
<ul>
<li><p>创建webpack.config.js</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">"./src/js/entry.js"</span>,<span class="comment">//入口路径配置</span></span><br><span class="line">  output: &#123;<span class="comment">//出口配置</span></span><br><span class="line">      path: __dirname + <span class="string">'/build/js'</span>,<span class="comment">//输出路径</span></span><br><span class="line">      filename: <span class="string">"bundle.js"</span><span class="comment">//输出文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">module</span>: &#123;</span><br><span class="line">    loaders: [<span class="comment">//模块加载器配置</span></span><br><span class="line">      &#123; test: <span class="regexp">/\.css$/</span>, loader: <span class="string">"style!css"</span>&#125;  <span class="comment">//所有css文件声明使用css-loader和style-loader加载器</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">webpack</span><br><span class="line">webpack <span class="params">--progress</span>   <span class="string">//</span>编译显示进度</span><br></pre></td></tr></table></figure>
</li>
<li><p>问题—每次修改模块文件内容的重新手动打包，刷新</p>
</li>
<li><p>自动编译</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">webpack <span class="params">--watch</span>  <span class="string">//</span>编译并启动监视<span class="params">(但需要刷新浏览器)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>浏览器自动刷新(热加载)—-解决手动刷新浏览器问题</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">npm install webpack-dev-<span class="keyword">server</span>@<span class="number">1</span> -g</span><br><span class="line">webpack-dev-<span class="keyword">server</span></span><br><span class="line">  访问: http:<span class="comment">//localhost:8080/webpack-dev-server/</span></span><br><span class="line">      ; http:<span class="comment">//localhost:8080</span></span><br><span class="line">  !!!发现问题----访问的是文件夹路径而不是页面</span><br><span class="line">    devServer:&#123;</span><br><span class="line">          contentBase: <span class="string">'./build'</span>,<span class="comment">//内置服务器动态加载页面所在的目录</span></span><br><span class="line">          historyApiFallback:<span class="keyword">true</span>,<span class="comment">//不跳转</span></span><br><span class="line">          inline:<span class="keyword">true</span></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    contentBase : 默认webpack-dev-<span class="keyword">server</span>为根文件夹提供内置的服务，如果其他目录下的文件</span><br><span class="line">                  提供服务需要在此设置目录(我们设置为build文件夹)</span><br><span class="line">    historyApiFallback : 开发单页面的时候非常有用，它依赖于H5的 history API，当</span><br><span class="line">                        设置为<span class="keyword">true</span>的时候所有的跳转都指向<span class="keyword">index</span>.html；</span><br><span class="line">    port：可以设置端口号，不设置时候默认为 <span class="number">8080</span></span><br><span class="line">    inline ： 设置为<span class="keyword">true</span>的时候回自动刷新(有的版本需要配合hot : <span class="keyword">true</span>使用)</span><br><span class="line">    </span><br><span class="line">  webpack-dev-<span class="keyword">server</span></span><br><span class="line">  访问: http:<span class="comment">//localhost:8080</span></span><br><span class="line">  </span><br><span class="line"> 问题：页面没有热加载，自动刷新，因为<span class="keyword">index</span>的src引入的硬盘中的build文件而不是webpack-dev-<span class="keyword">server</span>服务器内存中的build</span><br><span class="line">特点:</span><br><span class="line">  自动编译并刷新界面</span><br><span class="line">  不生成编译后的文件, 直接在内存中编译处理, 并启动服务器运行项目</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p>加载图片</p>
<ul>
<li><p>安装依赖的loader</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> <span class="keyword">url</span>-loader <span class="keyword">file</span>-loader <span class="comment">--save-dev</span></span><br><span class="line"><span class="keyword">url</span>-loader比<span class="keyword">file</span>-loader功能更加完善是对<span class="keyword">file</span>-loader的上层封装,但二者需配合使用</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加config中loader的配置</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">&#123; <span class="string">test:</span> <span class="regexp">/\.(png|jpg)$/</span>, <span class="string">loader:</span> <span class="string">"url-loader?limit=8192"</span> &#125;  <span class="comment">//如果图片小于limit就会进行Base64编码</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>拷入2张图片: </p>
<ul>
<li>小图: img/logo.png</li>
<li>大图: img/big.jpg</li>
</ul>
</li>
<li><p>定义引用图片的样式: test.css</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#box1</span>&#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../img/logo.jpg);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box2</span>&#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../img/big.jpg);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在页面引用样式或图片: index.html</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"box1"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">id</span>=<span class="string">"box2"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译并浏览</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">webpack-dev-<span class="keyword">server</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>图片打包问题</p>
  <figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、图片大于<span class="number">8</span>kb的时候无法打包到js文件中，</span><br><span class="line"><span class="number">2</span>、index.html引入js的时候发现没有打包进去的图片路径不对</span><br><span class="line"><span class="number">3</span>、解决方法： </span><br><span class="line">    * <span class="comment">//publicPath : './js/',//webpack的绝对路径,设置服务index.html资源的路径</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p>配置npm script命令</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"webpack-dev-server"</span>,</span><br><span class="line">  <span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">npm</span> start: 编译运行项目</span><br><span class="line"><span class="built_in">npm</span> build: 编译打包</span><br></pre></td></tr></table></figure>

</li>
</ul>
  	
					
	  </div>     
	  

	<div class="bottom">
  <div class="other">
    <div class="meta">
      

      
      <i class="iconfont icon-tag"></i>
      <a class="tag-link" href="/tags/webpack/">webpack</a>
      
    </div>

    <div class="operate">
      
      <span class="text">Share</span>
      <ul class="share">
	   			             
        <li class="iconfont 
		icon-share-qq 
		-mob-share-qq 
		item"></li>		
   	   			             
        <li class="iconfont 
		icon-share-weixin 
		-mob-share-weixin 
		item"></li>		
   	   			             
        <li class="iconfont 
		icon-share-weibo 
		-mob-share-weibo 
		item"></li>		
   	   
</ul>	

<script id="-mob-share" src="https://f1.webshare.mob.com/code/mob-share.js?appkey=21d601593a1de"></script>
      
    </div>
  </div>


  
  <nav class="nav">
    <div class="link">
      
      <a href="/2019/07/08/Less/" class="link-wrap">
        <strong class="caption">older</strong>
        
        <span class="title">
          Less
        </span>
      </a>
      
    </div>
    <div class="link">
      
    </div>
  </nav>
  
</div> 
	
<div class="comment">

    

    <div id="comment">
    </div>

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>

    <script src="//unpkg.com/valine@v1.1.8-beta/dist/Valine.min.js"></script>

    <script>
        new Valine({
            el: '#comment',
            notify: false,
            verify: false,
            app_id: 'cFM0eCo0CQ9xmBXmHi1eltol-gzGzoHsz',
            app_key: 'oh9tizsnvV2vNvWgqEvoNtQO',
            path: window.location.pathname,
            avatar: 'mm',
            guest_info: ['nick', 'mail']
        });
    </script>
    
</div>	
</article>

          </div> 
      </div>            
    
        <i id="toTop" class="iconfont icon-backtotop"></i>

  
    <div class="none" id="search">
    <div class="header">
        <input type="text" placeholder="输入你想搜索的" id="search-input" class="input">
        
        <i id="search-cancel" class="iconfont icon-cancel"></i>
    </div>

    <div id="search-result" class="result"></div>
</div>
     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon" src="/images/logo.png">  
      

         
            

            <a class="mobile-menu-link" href="/">首页
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">归档
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">标签
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">关于
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">搜索 </a>                 
            
         
      
</div>
        
    


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2d14233d5150db72b8cddabf0dab7d73"; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>






<script>
(function(i,s,o,g,r,a,m){
	i['GoogleAnalyticsObject']=r;
	i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-144218558-1', 'auto');
ga('send', 'pageview');

</script>

     
    


<footer class="footer">
	<div class="inner">
		<div class="copyright">
			&copy;
			
			2019
			Kevin
		</div>
	</div>
</footer>   

    <script src="/nayo.bundle.js"></script>           
  </body>        
</html>